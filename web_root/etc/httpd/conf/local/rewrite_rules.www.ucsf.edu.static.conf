###############################################################################
#                                                                             #
#   The convention here is ... offsite links get a 301 Moved Temporarily.     #
#   Onsite links (relative links) get              302 Moved Permanently.     # 
#                                                                             #
#   Generally with the offsite links it's not such a bad idea to keep         #
#     people coming back to ucsf.edu.  It's not that the content was _moved_  #
#     it wasn't there to begin with ...                                       #
#   Most of the onsite links here are to content that actually _was_ moved    #
#     hence the 301 status.                                                   #
#                                                                             #
#   Tyler Gannon <tyler@medallurgy.com>                                       #
#                                                                             #
###############################################################################


#  If the client is on one of the approved subnetworks
#    and https is on, then don't redirect them away from
#    any of the fun stuff.
RewriteCond %{REMOTE_HOST} ^64.54.[0-9]{1,3}.[0-9]{1,3}$   [OR]
RewriteCond %{REMOTE_HOST} ^128.218.[0-9]{1,3}.[0-9]{1,3}$ [OR]
RewriteCond %{REMOTE_HOST} ^169.230.[0-9]{1,3}.[0-9]{1,3}$
RewriteCond %{HTTPS} on
RewriteRule . - [skip=2]

RewriteRule ^admin.* / [R=404,L,NC]
RewriteRule ^.*/edit / [R=404,L,NC]

#  This group are for supporting images in the legacy articles.
RewriteRule ^_graphics/(.*)                           /media/legacy/_graphics/$1                       [NC,R=301,L]
RewriteCond %{REQUEST_URI} !^/images
RewriteRule . - [skip=4]
RewriteRule ^images/releases/(.*)                     /media/legacy/news/images/releases/$1            [NC,R=301,L]
RewriteRule ^images/sciencecafe/(.*)                  /media/legacy/news/images/$1                     [NC,R=301,L]
RewriteRule ^images/science_cafe/(.*)                 /media/legacy/news/images/stories/$1             [NC,R=301,L]
RewriteRule ^images/home/features/(.*)                /media/legacy/images/home/features/$1            [NC,R=301,L]
RewriteRule ^images/home/(.*)                         /media/legacy/images/home/$1                     [NC,R=301,L]
RewriteRule ^sciencecafe/images/(.*)                  /media/legacy/news/images/$1                     [NC,R=301,L]
RewriteRule ^daily/(\d{4}/\d{2}/.*jpg)                /media/legacy/today/daily/$1                     [NC,R=301,L]
RewriteRule ^(pdf/.*)                                 /media/$1                                        [NC,R=301,L]
#  End legacy media file support.

RewriteCond %{REQUEST_URI} !^/a
RewriteRule . - [skip=7]
RewriteRule ^abog                                      http://abog.ucsf.edu/ABOG/home.html             [NC,R=302,L]
RewriteRule ^about-ucsf/campus-leadership              /about/ucsf-leaders                             [NC,R=301,L]
RewriteRule ^about-ucsf/facts-figures                  /about/facts-figures                            [NC,R=301,L]
RewriteRule ^about-ucsf/mission                        /about/mission-vision                           [NC,R=301,L]
RewriteRule ^about-ucsf/principles                     /about/principles-community                     [NC,R=301,L]
RewriteRule ^about-ucsf                                /about                                          [NC,R=301,L]
RewriteRule ^alumni-friends                            /education                                      [NC,R=301,L]
RewriteRule ^brain/als                                 http://neurology.ucsf.edu/brain/als/            [NC,R=302,L]
RewriteRule ^brc                                       http://cancer.ucsf.edu/cores/mass-spectrometry  [NC,R=302,L]
RewriteCond %{REQUEST_URI} !^/c
RewriteRule . - [skip=5]
RewriteRule ^cge                                       http://ucsfcge.org/                             [NC,R=302,L]
RewriteRule ^cge/lgbtr                                 http://lgbt.ucsf.edu/                           [NC,R=302,L]
RewriteRule ^coe                                       http://www.coe.ucsf.edu/coe/                    [NC,R=302,L]
RewriteRule ^community                                 /about/ucsf-public-resources-and-services       [NC,R=301,L]
RewriteRule ^computing                                 http://help.ucsf.edu/                           [NC,R=302,L]
RewriteRule ^employment                                /about/about-working-ucsf                       [NC,R=301,L]
RewriteRule ^fas                                       http://fas.ucsf.edu/FAS/home.html               [NC,R=302,L]
RewriteRule ^fibroids                                  http://www.coe.ucsf.edu/fibroids/               [NC,R=302,L]
RewriteRule ^hdc                                       http://cdc.atucsf.com/                          [NC,R=302,L]
RewriteRule ^labs                                      /research/additional-resources/faculty-labs     [NC,R=301,L]
RewriteRule ^maps                                      /locations/campus-maps                          [NC,R=301,L]


#   RewriteRule ^multimedia/photography/category/C10 TBD-- current URL has broken ampersand symbol [NC,R=301,L]
RewriteCond %{REQUEST_URI} !^/m
RewriteRule . - [skip=24]
RewriteRule ^multimedia/photography/category/C11       /news/multimedia/photography/stories            [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C12       /news/multimedia/photography/genentech-hall     [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C13       /news/multimedia/photography/community-center   [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C14       /news/multimedia/photography/public-art         [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C15       /news/multimedia/photography/mission-bay        [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C16       /news/multimedia/photography/related-events     [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C17       /news/multimedia/photography/mission-bay-neighborhood                               [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C19       /news/multimedia/photography/ucsf-campus-sites  [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C20       /news/multimedia/photography/laurel-heights     [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C21       /news/multimedia/photography/parnassus          [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C22       /news/multimedia/photography/veterans-affairs-medical-center                        [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C23       /news/multimedia/photography/mount-zion [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C24       /news/multimedia/photography/san-francisco-general-hospital                         [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C25       /news/multimedia/photography/moffit-long        [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C26       /news/multimedia/photography/transportation     [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C27       /news/multimedia/photography/qb3-images         [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C28       /news/multimedia/photography/people             [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C30       /news/multimedia/photography/uncategorized      [NC,R=301,L]
#   RewriteRule ^multimedia/photography/category/C31 TBD-- current URL has broken ampersand symbol [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C34       /news/multimedia/photography/diller-building-opening                                [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C35       /news/multimedia/photography/diller-building-opening-event                          [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C36       /news/multimedia/photography/helen-diller-family-cancer-research-building           [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C37       /news/multimedia/photography/helen-diller-family-comprehensive-cancer-center        [NC,R=301,L]
RewriteRule ^multimedia/photography/category/C9        /news/multimedia/photography/mission-bay        [NC,R=301,L]
RewriteRule ^multimedia/photography                    /news-media-services/images                     [NC,R=301,L]

RewriteRule ^oshpr                                     http://worklife.ucsf.edu/oshpr/                 [NC,R=302,L]
RewriteRule ^pdf/maps                                  /locations/campus-maps                          [NC,R=301,L]
RewriteRule ^pdf/policy/Campus-Profile-May-2009.pdf    /about/about-ucsf [NC,R=301,L]
RewriteRule ^postdocs                                  /research/additional-resources                  [NC,R=301,L]
RewriteCond %{REQUEST_URI} !^/r
RewriteRule . - [skip=7]
RewriteRule ^research/bytopic                          /research/additional-resources/research-institutes                                  [NC,R=301,L]
RewriteRule ^research/centers                          /research/additional-resources/research-institutes                                  [NC,R=301,L]
RewriteRule ^resolve                                   http://worklife.ucsf.edu/resolve/               [NC,R=302,L]
RewriteRule ^resources/accessibility                   http://its.ucsf.edu/main/790-DSY.html           [NC,R=302,L]
RewriteRule ^resources/contacts                        /contact-us                                     [NC,R=301,L]
RewriteRule ^resources/podcasts                        /news/rss-news-feeds                            [NC,R=301,L]
RewriteRule ^resources/sitemap                         /sitemap                                        [NC,R=301,L]
RewriteCond %{REQUEST_URI} !^/s
RewriteRule . - [skip=8]
RewriteRule ^science-cafe                              /news                                           [NC,R=301,L]
RewriteRule ^search                                    /ucsf/search                                    [NC,R=301,L]
RewriteRule ^senate/0-committee/i-gradc.html           http://senate.ucsf.edu/0-committee/i-gradc.html [NC,R=302,L]
RewriteRule ^senate/facultyhandbook/index.html         http://senate.ucsf.edu/facultyhandbook/index.html           [NC,R=302,L]
RewriteRule ^senate/indexmain.html                     http://senate.ucsf.edu/index.html               [NC,R=302,L]
RewriteRule ^sep                                       http://biochemistry.ucsf.edu/programs/sep/      [NC,R=302,L]
RewriteRule ^students                                  /education                                      [NC,R=301,L]
RewriteRule ^swe                                       http://worklife.ucsf.edu/swe/                   [NC,R=302,L]
RewriteRule ^ucsffa                                    http://rco.ucsf.edu/index.php/ucsffa/index/     [NC,R=302,L]
RewriteRule ^wrklife                                   http://worklife.ucsf.edu/                       [NC,R=302,L]

# The following are to support links found in legacy content.

RewriteCond %{REQUEST_URI} !^/[a-e]
RewriteRule . - [skip=17]
# *RewriteRule ^agrc/$                               http://ucsfagrc.org/ [NC,R=302,L]
RewriteRule ^alumni/fahouse$                               http://support.ucsf.edu/alumni/fahouse [NC,R=302,L]
RewriteRule ^beggs$                               http://vision.ucsf.edu/beggs [NC,R=302,L]
RewriteRule ^bms/faculty/dallman.html$                               http://bms.ucsf.edu/faculty/dallman.html [NC,R=302,L]
RewriteRule ^bms/faculty/shaw.html$                               http://bms.ucsf.edu/faculty/shaw.html [NC,R=302,L]
RewriteRule ^bms/faculty/wittmann.html$                               http://bms.ucsf.edu/faculty/wittmann.html [NC,R=302,L]
RewriteRule ^cando$                               http://dentistry.ucsf.edu/cando [NC,R=302,L]
RewriteRule ^cbe$                               http://cbe.ucsf.edu [NC,R=302,L]
RewriteRule ^chs$                               http://nurseweb.ucsf.edu/chs [NC,R=302,L]
RewriteRule ^csdh$                               http://www.familymedicine.medschool.ucsf.edu/csdh [NC,R=302,L]
RewriteRule ^ctb$                               http://dentistry.ucsf.edu/ctb [NC,R=302,L]
RewriteRule ^dbps$                               http://bps.ucsf.edu/pspg [NC,R=302,L]
RewriteRule ^dbps/faculty/pages/burchard.html$                               http://bps.ucsf.edu/pspg/faculty/pages/burchard.html [NC,R=302,L]
RewriteRule ^desailab$                               http://physio.ucsf.edu/desai [NC,R=302,L]
RewriteRule ^dmndlab$                               http://diamondlab.ucsf.edu [NC,R=302,L]
RewriteRule ^dmndlab/contact.html$                               http://diamondlab.ucsf.edu/contact.html [NC,R=302,L]
RewriteRule ^dphtalk$                               http://dentistry.ucsf.edu/dphtalk [NC,R=302,L]


RewriteCond %{REQUEST_URI} !^/[h-o]
RewriteRule . - [skip=20]
RewriteRule ^hortonlab$                               http://vision.ucsf.edu/hortonlab/ [NC,R=302,L]
RewriteRule ^humgene$                               http://www.neugenes.org [NC,R=302,L]
RewriteRule ^hut$                               http://rco.ucsf.edu/index.php/hut/index/ [NC,R=302,L]
RewriteRule ^idmp$                               http://clinicalpharmacy.ucsf.edu/idmp [NC,R=302,L]
RewriteRule ^immuno$                               http://immunology.ucsf.edu/immuno [NC,R=302,L]
RewriteRule ^imn/Forum/Integrative%20Medicine%20Guide%20PDF%202007.pdf$                               http://rco.ucsf.edu/index.php/imn/index//Forum/Integrative%20Medicine%20Guide%20PDF%202007.pdf [NC,R=302,L]
RewriteRule ^krummellab$                               http://pathology.ucsf.edu/krummel [NC,R=302,L]
RewriteRule ^laca/$                               http://rco.ucsf.edu/index.php/laca/index// [NC,R=302,L]
RewriteRule ^mckerrow$                               http://pathology.ucsf.edu/mckerrow/ [NC,R=302,L]
RewriteRule ^mckerrow/mckerrow.html$                               http://pathology.ucsf.edu/mckerrow//mckerrow.html [NC,R=302,L]
RewriteRule ^medsoc$                               http://sbs.ucsf.edu/medsoc/ [NC,R=302,L]
RewriteRule ^micro/faculty/ganem_folder/index.html$                               http://microbiology.ucsf.edu/micro/faculty/ganem_folder/index.html [NC,R=302,L]
RewriteRule ^micro/index.htm$                               http://microbiology.ucsf.edu/micro/index.htm [NC,R=302,L]
RewriteRule ^micro/pathogenesis/index.htm$                               http://microbiology.ucsf.edu/micro/pathogenesis/index.htm [NC,R=302,L]
RewriteRule ^morgan$                               http://physio.ucsf.edu/morgan [NC,R=302,L]
RewriteRule ^nddl$                               http://neurology.ucsf.edu/nddl [NC,R=302,L]
RewriteRule ^neurosc/faculty/neuro_nicoll.html$                               http://neuroscience.ucsf.edu/neurograd/index.html/faculty/neuro_nicoll.html [NC,R=302,L]
RewriteRule ^oakeslab$                               http://pathology.ucsf.edu/oakes [NC,R=302,L]
RewriteRule ^ocsci$                               http://dentistry.ucsf.edu/ocsci [NC,R=302,L]
RewriteRule ^oralpath$                               http://dentistry.ucsf.edu/oralpath [NC,R=302,L]

RewriteCond %{REQUEST_URI} !^/[p-w]
RewriteRule . - [skip=23]
RewriteRule ^pathol/BIDC$                               http://pathology.ucsf.edu/BIDC [NC,R=302,L]
RewriteRule ^pereira$                               http://dentistry.ucsf.edu/pereira [NC,R=302,L]
RewriteRule ^prds$                               http://dentistry.ucsf.edu/prds [NC,R=302,L]
RewriteRule ^radonc$                               http://radonc.ucsf.edu [NC,R=302,L]
RewriteRule ^sciencecafe/2006/chile.html$                               /science-cafe/conversations/chile-warms-to-ucsf-science-graduate-student-monica-rodrigo-brenni/ [NC,R=301,L]
RewriteRule ^sciencecafe/2006/dill.html$                               /science-cafe/conversations/dill/ [NC,R=301,L]
RewriteRule ^sciencecafe/2008/floss.html$                               /science-cafe/conversations/floss-or-die-a-conversation-with-dental-scientist-mark-ryder/ [NC,R=301,L]
RewriteRule ^sciencecafe/2008/goadsby.html$                               /science-cafe/conversations/hope-for-headaches-a-conversation-with-headache-expert-peter-goadsby/ [NC,R=301,L]
RewriteRule ^sciencecafe/2008/proteins.html$                               /science-cafe/conversations/poring-over-proteins-a-conversation-with-protein-expert-andrej-sali/ [NC,R=301,L]
RewriteRule ^scor$                               http://coe.ucsf.edu/scor [NC,R=302,L]
RewriteRule ^senate/index.html$                               http://senate.ucsf.edu/index.html [NC,R=302,L]
RewriteRule ^sfcc$                               http://clinicalpharmacy.ucsf.edu/sfcc [NC,R=302,L]
RewriteRule ^sfhbc$                               http://rco.ucsf.edu/index.php/sfhbc [NC,R=302,L]
RewriteRule ^sftrc$                               http://ucsftrc.autoupdate.com [NC,R=302,L]
RewriteRule ^sleep/neylan.html$                               http://web.ucsf.edu/sleep/neylan.html [NC,R=302,L]
RewriteRule ^sretavan$                               http://vision.ucsf.edu/sretavan/ [NC,R=302,L]
RewriteRule ^stroke$                               http://neurology.ucsf.edu/stroke [NC,R=302,L]
RewriteRule ^swansonlab$                               http://neurology.ucsf.edu/swansonlab [NC,R=302,L]
RewriteRule ^tanglab$                               http://tang.ucsf.edu [NC,R=302,L]
RewriteRule ^tanglab/index.html$                               http://tang.ucsf.edu/index.html [NC,R=302,L]
RewriteRule ^thoracic$                               http://thoraciconcology.ucsf.edu/ [NC,R=302,L]
RewriteRule ^today$                               http://today.ucsf.edu/ [NC,R=302,L]
RewriteRule ^wittmann$                               http://dentistry.ucsf.edu/wittmann [NC,R=302,L]

